__NUXT_JSONP__("/note/636170453548a57ba116761e", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return {data:[{body:g,note:{_id:"636170453548a57ba116761e",_sys:{raw:{createdAt:"2022-11-01T19:15:17.916Z",updatedAt:c,firstPublishedAt:h,publishedAt:c},customOrder:3,createdAt:h,updatedAt:c},title:"GCSにアップロードしたPDFのリンクが勝手にダウンロードしてしまう",slug:"gcs-pdf-open-another-tab",body:g,author:{_id:"61a7359d8131ac001847fbb4",_sys:{raw:{createdAt:d,updatedAt:e,firstPublishedAt:d,publishedAt:e},createdAt:d,updatedAt:e},name:i,slug:i,biography:"\u003Cp\u003EWebエンジニアです。\u003C\u002Fp\u003E\u003Cp\u003Eよろしくお願いします。\u003C\u002Fp\u003E",image:"63de027516bdb9179566c9ba"},tags:[{_id:j,_sys:{raw:{createdAt:a,updatedAt:b,firstPublishedAt:a,publishedAt:b},customOrder:k,createdAt:a,updatedAt:b},name:l,slug:m,image:n}]},tags:[{_id:j,_sys:{raw:{createdAt:a,updatedAt:b,firstPublishedAt:a,publishedAt:b},customOrder:k,createdAt:a,updatedAt:b},name:l,slug:m,image:{_id:n,altText:f,description:f,fileName:"cloud_storage.svg",fileSize:745,fileType:"image\u002Fsvg+xml",height:o,metadata:{},src:"https:\u002F\u002Fik.imagekit.io\u002Fmasahikoproject\u002F966a47dd-970a-4d41-a073-d8515f12d909\u002Fcloud_storage.svg",title:f,width:o}}]}],fetch:{},mutations:void 0}}("2022-11-01T19:25:13.490Z","2022-12-04T07:24:35.499Z","2022-11-01T19:27:41.821Z","2021-12-01T08:43:09.433Z","2023-02-04T07:00:38.318Z","","\u003Ch2\u003E問題\u003C\u002Fh2\u003E\n\u003Cp\u003EGoogleCloudStorageでアップロードしたpdfのリンクをクリックするとPDF viewerが開かずにダウンロードされる。\u003C\u002Fp\u003E\n\u003Ch2\u003E原因\u003C\u002Fh2\u003E\n\u003Cp\u003Eファイルアップロード時に、\u003Ccode\u003EContent-Type\u003C\u002Fcode\u003Eを明示的に指定しないと、\u003Ccode\u003EContent-Type\u003C\u002Fcode\u003Eが勝手に\u003Ccode\u003Eapplication\u002Foctet-stream\u003C\u002Fcode\u003Eとなってしまい、ファイルの種類が分からないが故に、ダウンロードしてしまうようです。\u003C\u002Fp\u003E\n\u003Cp\u003EGoogle Cloud Storageで「種類」をしていすることでPDF Viewerで開くことができます。\u003C\u002Fp\u003E\n\u003Ch2\u003E解決策\u003C\u002Fh2\u003E\n\u003Cp\u003Eプログラムで明示的にContentTypeを指定します。\u003C\u002Fp\u003E\n\u003Ch3\u003EGCSから設定する場合\u003C\u002Fh3\u003E\n\u003Cp\u003Eオブジェクトの詳細から、「メタデータを編集」をクリックします。その際に開くモーダルウインドウでContent-Typeを指定します。\u003C\u002Fp\u003E\n\u003Ch3\u003EC#の例\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-cs\"\u003Estorage.UploadObject(bucketName, objectName, contentType, FileSource);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3\u003Eコマンド\u003C\u002Fh3\u003E\n\u003Cp\u003Eすでにアップロードしているファイルは、以下のコマンドで一括変更が可能\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Egsutil ls &quot;gs:\u002F\u002Fmy-bucket-name\u002Ffolder-name\u002F&quot; \\\n| grep &quot;\\.pdf&quot; \\\n| xargs -I {} gsutil setmeta -h &quot;Content-Type: application\u002Fpdf&quot; &quot;{}&quot;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n","2022-11-01T19:25:21.280Z","masa","636172993548a57ba116a49e",13,"Cloud Storage","google-cloud-storage","6361727b3548a57ba116a3b5",24)));